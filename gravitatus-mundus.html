<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Gravitatus Mundus - Quantum Honkibilia</title>
    <meta charset="UTF-8">
    <meta name="description" content="Collidius rectanculi but with gravity"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="rectanculi.css">
    <script src="felicius-helperus.js" charset="utf-8"></script>
    <script src="ludantus.js" charset="utf-8"></script>
    <script src="rectanculi.js" charset="utf-8"></script>
  </head>
  <body>
    <div id="rectangle-wrapper">
      <div id="player"></div>
    </div>
    <script src="keys.js" charset="utf-8"></script>
    <script>
const rectangles = [
  {x: -10, y: -20, width: 100, height: 10, type: 'solid'},
  {x: -50, y: 10, width: 50, height: 10, type: 'solid'},
  {x: -10, y: -10, width: 10, height: 20, type: 'solid'}
];
recognizeRectangles(rectangles);
class DumbPlayer extends Player {

  constructor(initX, initY, size) {
    super();
    this.x = initX;
    this.y = initY;
    this.width = size;
    this.height = size;
    this.xv = this.yv = 0;
    this.onground = false;
  }

  move() {
    if (keys[37]) this.xv--;
    if (keys[38] && this.onground) this.yv -= 7;
    if (keys[39]) this.xv++;
    this.xv *= 0.8;
    this.yv += 0.5;
    const {xv, yv, rect, side} = this.checkCollisions(this, rectangles);
    if (rect) {
      this.xv = xv;
      this.yv = yv;
    }
    this.onground = side === 'top';
    this.x += this.xv;
    this.y += this.yv;
    playerElem.style.transform = `translate(${this.x}px, ${this.y}px)`;
  }

}
const playerElem = document.getElementById('player');
const player = new DumbPlayer(-20, -20, 10);
function move() {
  player.move();
  window.requestAnimationFrame(move);
}
move();
    </script>
  </body>
</html>
